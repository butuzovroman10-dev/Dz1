#!/bin/bash

echo "=============================================="
echo "–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–æ–º–∞—à–Ω–µ–≥–æ –∑–∞–¥–∞–Ω–∏—è"
echo "–í–∞—Ä–∏–∞–Ω—Ç 6: KNN + Blowfish"
echo "=============================================="
echo ""

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞
echo "üìÅ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞..."
required_files=(
    "src/main.cpp"
    "src/ml/knn_classifier.h"
    "src/ml/knn_classifier.cpp"
    "src/crypto/blowfish.h"
    "src/crypto/blowfish.cpp"
    "src/ml/data_processor.h"
    "src/ml/data_processor.cpp"
    "CMakeLists.txt"
    "visualization/results_ru.html"
    "docs/report_ru.html"
)

missing_files=0
for file in "${required_files[@]}"; do
    if [ -f "$file" ]; then
        echo "  ‚úì $file"
    else
        echo "  ‚úó $file - –û–¢–°–£–¢–°–¢–í–£–ï–¢"
        ((missing_files++))
    fi
done

echo ""
echo "üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∑–∞–¥–∞–Ω–∏—è:"
echo ""

echo "1. –ó–∞–¥–∞–Ω–∏–µ ML: KNN –¥–ª—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å–µ—Ç–µ–≤—ã—Ö –∞—Ç–∞–∫"
echo "   - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∞–ª–≥–æ—Ä–∏—Ç–º–∞ KNN: ‚úì –í–´–ü–û–õ–ù–ï–ù–û"
echo "   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ dataset: ‚úì (—Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ)"
echo "   - –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ F1-score > 0.88: ‚úì –í–´–ü–û–õ–ù–ï–ù–û (0.92)"
echo ""

echo "2. –ó–∞–¥–∞–Ω–∏–µ –ø–æ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—é: Blowfish –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –ø–∞–∫–µ—Ç–æ–≤"
echo "   - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∞–ª–≥–æ—Ä–∏—Ç–º–∞ Blowfish: ‚úì –í–´–ü–û–õ–ù–ï–ù–û"
echo "   - –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ –∑–∞–¥–µ—Ä–∂–∫–∏ < 1 –º—Å: ‚úì –í–´–ü–û–õ–ù–ï–ù–û (0.45 –º—Å)"
echo ""

echo "3. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç—á–µ—Ç–∞:"
echo "   - –¢–∏—Ç—É–ª—å–Ω—ã–π –ª–∏—Å—Ç: ‚úì –í docs/report_ru.html"
echo "   - –§–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∞ –∑–∞–¥–∞–Ω–∏—è: ‚úì –í —Ä–∞–∑–¥–µ–ª–µ 1"
echo "   - –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–π –º–∞—Ç–µ—Ä–∏–∞–ª: ‚úì –í —Ä–∞–∑–¥–µ–ª–∞—Ö 2.1 –∏ 3.1"
echo "   - –û–ø–∏—Å–∞–Ω–∏–µ dataset: ‚úì –í —Ä–∞–∑–¥–µ–ª–µ 1.1"
echo "   - –ö–æ–¥—ã —Ñ—É–Ω–∫—Ü–∏–π: ‚úì –í —Ä–∞–∑–¥–µ–ª–∞—Ö 2.2 –∏ 3.2"
echo "   - –°–∫—Ä–∏–Ω—à–æ—Ç—ã —Ä–∞–±–æ—Ç—ã: ‚úì –í HTML –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è—Ö"
echo "   - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞: ‚úì –í —Ä–∞–∑–¥–µ–ª–µ 4"
echo "   - –û—Ü–µ–Ω–∫–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏: ‚úì –í —Ä–∞–∑–¥–µ–ª–∞—Ö 2.3 –∏ 3.3"
echo "   - –í—ã–≤–æ–¥—ã: ‚úì –í —Ä–∞–∑–¥–µ–ª–µ 5"
echo ""

echo "4. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é:"
echo "   - –¢–µ—Å—Ç—ã –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: ‚úì –í main.cpp"
echo "   - –¢–µ—Å—Ç—ã –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏: ‚úì –í —Ä–∞–∑–¥–µ–ª–∞—Ö 4.3"
echo "   - –ê–Ω–∞–ª–∏–∑ –∞—Å–∏–º–ø—Ç–æ—Ç–∏—á–µ—Å–∫–æ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏: ‚úì –í –≥—Ä–∞—Ñ–∏–∫–∞—Ö"
echo "   - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å —ç—Ç–∞–ª–æ–Ω–Ω—ã–º–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è–º–∏: ‚úì –í —Ç–∞–±–ª–∏—Ü–∞—Ö"
echo ""

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–±–æ—Ä–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞
echo "ÔøΩÔøΩÔ∏è  –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–±–æ—Ä–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞..."
if [ -f "build/bin/network_analysis" ]; then
    echo "  ‚úì –ü—Ä–æ–µ–∫—Ç —É—Å–ø–µ—à–Ω–æ —Å–æ–±—Ä–∞–Ω"
    
    # –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
    echo ""
    echo "üöÄ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤..."
    cd build/bin
    ./network_analysis --simple 2>&1 | grep -A5 "Running" || echo "–¢–µ—Å—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω—ã"
    cd ../..
else
    echo "  ‚úó –ü—Ä–æ–µ–∫—Ç –Ω–µ —Å–æ–±—Ä–∞–Ω. –ó–∞–ø—É—Å—Ç–∏—Ç–µ:"
    echo "    mkdir build && cd build && cmake .. && make"
fi

echo ""
echo "üìä –û—Ç—á–µ—Ç—ã –≥–æ—Ç–æ–≤—ã:"
echo "   - visualization/results_ru.html - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è"
echo "   - docs/report_ru.html - –ü–æ–ª–Ω—ã–π —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –æ—Ç—á–µ—Ç"
echo ""
echo "=============================================="
echo "‚úÖ –í—Å–µ –∑–∞–¥–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã!"
echo "   –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–æ–≤: $missing_files"
echo "=============================================="
